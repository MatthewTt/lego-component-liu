{"remainingRequest":"/Users/jiajieliu/Codes/lego-component/node_modules/babel-loader/lib/index.js!/Users/jiajieliu/Codes/lego-component/node_modules/ts-loader/index.js??ref--15-2!/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js??ref--14-0!/Users/jiajieliu/Codes/lego-component/src/store/editor.ts","dependencies":[{"path":"/Users/jiajieliu/Codes/lego-component/src/store/editor.ts","mtime":1645429348315},{"path":"/Users/jiajieliu/Codes/lego-component/babel.config.js","mtime":1644651795060},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gImxvZGFzaCI7CmV4cG9ydCB2YXIgdGVzdEVkaXRvckxpc3QgPSBbewogIGlkOiB1dWlkdjQoKSwKICBuYW1lOiAnbFRleHQnLAogIHByb3BzOiB7CiAgICB0ZXh0OiAnZGRzZHMnLAogICAgZm9udFNpemU6ICcyMHB4JywKICAgIGNvbG9yOiAncmVkJywKICAgIGZvbnRXaWR0aDogJ2JvbGQnLAogICAgYWN0aW9uVHlwZTogJ3VybCcsCiAgICB1cmw6ICdodHRwOi8vYmFpZHUuY29tJywKICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgfQp9LCB7CiAgaWQ6IHV1aWR2NCgpLAogIG5hbWU6ICdsVGV4dCcsCiAgcHJvcHM6IHsKICAgIHRleHQ6ICdoZWxsbzInLAogICAgcG9zaXRpb246ICdyZWxhdGl2ZScKICB9Cn1dOwp2YXIgZWRpdG9yID0gewogIHN0YXRlOiB7CiAgICBjb21wb25lbnRzOiB0ZXN0RWRpdG9yTGlzdCwKICAgIGN1cnJlbnRFbGVtZW50OiAnJwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBhZGRDb21wb25lbnQ6IGZ1bmN0aW9uIGFkZENvbXBvbmVudChzdGF0ZSwgcHJvcHMpIHsKICAgICAgdmFyIG5ld0NvbXBvbmVudCA9IHsKICAgICAgICBpZDogdXVpZHY0KCksCiAgICAgICAgbmFtZTogJ2xUZXh0JywKICAgICAgICBwcm9wczogcHJvcHMKICAgICAgfTsKICAgICAgc3RhdGUuY29tcG9uZW50cy5wdXNoKG5ld0NvbXBvbmVudCk7CiAgICB9LAogICAgc2V0QWN0aXZlOiBmdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUsIGN1cnJlbnRJZCkgewogICAgICBzdGF0ZS5jdXJyZW50RWxlbWVudCA9IGN1cnJlbnRJZDsKICAgIH0sCiAgICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uIHVwZGF0ZUNvbXBvbmVudChzdGF0ZSwgX3JlZikgewogICAgICB2YXIga2V5ID0gX3JlZi5rZXksCiAgICAgICAgICB2YWx1ZSA9IF9yZWYudmFsdWU7CiAgICAgIHZhciBuZXdTdGF0ZSA9IGNsb25lRGVlcChzdGF0ZSk7CiAgICAgIHZhciBpbmRleCA9IG5ld1N0YXRlLmNvbXBvbmVudHMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IG5ld1N0YXRlLmN1cnJlbnRFbGVtZW50OwogICAgICB9KTsKICAgICAgdmFyIGN1cnJlbnQgPSBuZXdTdGF0ZS5jb21wb25lbnRzW2luZGV4XTsKCiAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgY3VycmVudC5wcm9wc1trZXldID0gdmFsdWU7CiAgICAgIH0KCiAgICAgIHN0YXRlLmNvbXBvbmVudHNbaW5kZXhdID0gY3VycmVudDsKICAgIH0sCiAgICByZW1vdmVBY3RpdmU6IGZ1bmN0aW9uIHJlbW92ZUFjdGl2ZShzdGF0ZSkgewogICAgICB2YXIgY3VycmVudCA9IHN0YXRlLmNvbXBvbmVudHMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IHN0YXRlLmN1cnJlbnRFbGVtZW50OwogICAgICB9KTsKCiAgICAgIGlmIChjdXJyZW50KSB7CiAgICAgICAgc3RhdGUuY29tcG9uZW50cy5zcGxpY2UoY3VycmVudCwgMSk7CiAgICAgIH0KICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGdldEN1cnJlbnRFbGVtZW50OiBmdW5jdGlvbiBnZXRDdXJyZW50RWxlbWVudChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY29tcG9uZW50cy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IHN0YXRlLmN1cnJlbnRFbGVtZW50OwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IGVkaXRvcjs="},{"version":3,"mappings":";;;;AAAA,SAASA,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AAMA,SAASC,SAAT,QAA0B,QAA1B;AAcA,OAAO,IAAMC,cAAc,GAAoB,CAAC;AAC5CC,IAAE,EAAEH,MAAM,EADkC;AAE5CI,MAAI,EAAE,OAFsC;AAG5CC,OAAK,EAAE;AACHC,QAAI,EAAE,OADH;AAEHC,YAAQ,EAAE,MAFP;AAGHC,SAAK,EAAE,KAHJ;AAIHC,aAAS,EAAE,MAJR;AAKHC,cAAU,EAAE,KALT;AAMHC,OAAG,EAAE,kBANF;AAOHC,YAAQ,EAAE;AAPP;AAHqC,CAAD,EAY5C;AACCT,IAAE,EAAEH,MAAM,EADX;AAECI,MAAI,EAAE,OAFP;AAGCC,OAAK,EAAE;AACHC,QAAI,EAAE,QADH;AAEHM,YAAQ,EAAE;AAFP;AAHR,CAZ4C,CAAxC;AAqBP,IAAMC,MAAM,GAAyC;AACjDC,OAAK,EAAE;AACHC,cAAU,EAAEb,cADT;AAEHc,kBAAc,EAAE;AAFb,GAD0C;AAKjDC,WAAS,EAAE;AACPC,gBADO,wBACMJ,KADN,EACaT,KADb,EAC6C;AAChD,UAAMc,YAAY,GAAG;AACjBhB,UAAE,EAAEH,MAAM,EADO;AAEjBI,YAAI,EAAE,OAFW;AAGjBC,aAAK,EAALA;AAHiB,OAArB;AAKAS,WAAK,CAACC,UAAN,CAAiBK,IAAjB,CAAsBD,YAAtB;AACH,KARM;AASPE,aATO,qBASGP,KATH,EASUQ,SATV,EAS2B;AAC9BR,WAAK,CAACE,cAAN,GAAuBM,SAAvB;AACH,KAXM;AAYPC,mBAZO,2BAYST,KAZT,QAY8B;AAAA,UAAZU,GAAY,QAAZA,GAAY;AAAA,UAAPC,KAAO,QAAPA,KAAO;AACjC,UAAMC,QAAQ,GAAGzB,SAAS,CAACa,KAAD,CAA1B;AACA,UAAMa,KAAK,GAAGD,QAAQ,CAACX,UAAT,CAAoBa,SAApB,CAA8B,cAAI;AAAA,eAAIC,IAAI,CAAC1B,EAAL,KAAYuB,QAAQ,CAACV,cAAzB;AAAA,OAAlC,CAAd;AACA,UAAMc,OAAO,GAAGJ,QAAQ,CAACX,UAAT,CAAoBY,KAApB,CAAhB;;AACA,UAAIG,OAAJ,EAAa;AACTA,eAAO,CAACzB,KAAR,CAAcmB,GAAd,IAAqBC,KAArB;AACH;;AACDX,WAAK,CAACC,UAAN,CAAiBY,KAAjB,IAA0BG,OAA1B;AACH,KApBM;AAqBPC,gBArBO,wBAqBMjB,KArBN,EAqBW;AACd,UAAMgB,OAAO,GAAGhB,KAAK,CAACC,UAAN,CAAiBa,SAAjB,CAA2B,cAAI;AAAA,eAAIC,IAAI,CAAC1B,EAAL,KAAYW,KAAK,CAACE,cAAtB;AAAA,OAA/B,CAAhB;;AACA,UAAIc,OAAJ,EAAa;AACThB,aAAK,CAACC,UAAN,CAAiBiB,MAAjB,CAAwBF,OAAxB,EAAiC,CAAjC;AACH;AACJ;AA1BM,GALsC;AAiCjDG,SAAO,EAAE;AACLC,qBADK,6BACapB,KADb,EACkB;AACnB,aAAOA,KAAK,CAACC,UAAN,CAAiBoB,IAAjB,CAAsB,cAAI;AAAA,eAAIN,IAAI,CAAC1B,EAAL,KAAYW,KAAK,CAACE,cAAtB;AAAA,OAA1B,CAAP;AACH;AAHI;AAjCwC,CAArD;AAwCA,eAAeH,MAAf","names":["v4","uuidv4","cloneDeep","testEditorList","id","name","props","text","fontSize","color","fontWidth","actionType","url","position","editor","state","components","currentElement","mutations","addComponent","newComponent","push","setActive","currentId","updateComponent","key","value","newState","index","findIndex","item","current","removeActive","splice","getters","getCurrentElement","find"],"sourceRoot":"","sources":["/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js??ref--14-0!/Users/jiajieliu/Codes/lego-component/src/store/editor.ts"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { Module } from \"vuex\";\nimport { GlobalDataProps } from \"@/store/index\";\nimport lText from \"@/components/LText.vue\";\nimport { TextDefaultProps } from \"@/defaultProps\";\nimport { defineAsyncComponent, shallowRef, toRefs } from \"vue\";\nimport { cloneDeep } from \"lodash\";\n\n\nexport interface ComponentData {\n    props: { [key: string]: any }; // 组件各种属性\n    id: string; // 组件id，uuid生成\n    name: any; // 组件对象\n}\n\nexport interface EditorProps {\n    components: ComponentData[];\n    currentElement: string; // 和id对应\n}\n\nexport const testEditorList: ComponentData[] = [{\n    id: uuidv4(),\n    name: 'lText',\n    props: {\n        text: 'ddsds',\n        fontSize: '20px',\n        color: 'red',\n        fontWidth: 'bold',\n        actionType: 'url',\n        url: 'http://baidu.com',\n        position: 'relative'\n    }\n}, {\n    id: uuidv4(),\n    name: 'lText',\n    props: {\n        text: 'hello2',\n        position: 'relative'\n    }\n}]\n\nconst editor: Module<EditorProps, GlobalDataProps> = {\n    state: {\n        components: testEditorList,\n        currentElement: '',\n    },\n    mutations: {\n        addComponent(state, props: Partial<TextDefaultProps>) {\n            const newComponent = {\n                id: uuidv4(),\n                name: 'lText',\n                props\n            }\n            state.components.push(newComponent)\n        },\n        setActive(state, currentId: string) {\n            state.currentElement = currentId\n        },\n        updateComponent(state, { key, value }) {\n            const newState = cloneDeep(state)\n            const index = newState.components.findIndex(item => item.id === newState.currentElement)\n            const current = newState.components[index]\n            if (current) {\n                current.props[key] = value\n            }\n            state.components[index] = current\n        },\n        removeActive(state) {\n            const current = state.components.findIndex(item => item.id === state.currentElement)\n            if (current) {\n                state.components.splice(current, 1)\n            }\n        }\n    },\n    getters: {\n        getCurrentElement(state) {\n            return state.components.find(item => item.id === state.currentElement)\n        }\n    }\n\n}\nexport default editor\n"]}]}