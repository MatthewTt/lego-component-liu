{"remainingRequest":"/Users/jiajieliu/Codes/lego-component/node_modules/babel-loader/lib/index.js!/Users/jiajieliu/Codes/lego-component/node_modules/ts-loader/index.js??ref--15-2!/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js??ref--14-0!/Users/jiajieliu/Codes/lego-component/src/store/editor.ts","dependencies":[{"path":"/Users/jiajieliu/Codes/lego-component/src/store/editor.ts","mtime":1645696857477},{"path":"/Users/jiajieliu/Codes/lego-component/babel.config.js","mtime":1644651795060},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCB7IGNsb25lRGVlcCB9IGZyb20gImxvZGFzaCI7CmV4cG9ydCB2YXIgdGVzdEVkaXRvckxpc3QgPSBbewogIGlkOiB1dWlkdjQoKSwKICBuYW1lOiAnbFRleHQnLAogIHByb3BzOiB7CiAgICB0ZXh0OiAnZGRzZHMnLAogICAgZm9udFNpemU6ICcyMHB4JywKICAgIGNvbG9yOiAncmVkJywKICAgIGZvbnRXZWlnaHQ6ICdib2xkJywKICAgIGFjdGlvblR5cGU6ICd1cmwnLAogICAgdXJsOiAnaHR0cDovL2JhaWR1LmNvbScsCiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJwogIH0KfSwgewogIGlkOiB1dWlkdjQoKSwKICBuYW1lOiAnbFRleHQnLAogIHByb3BzOiB7CiAgICB0ZXh0OiAnaGVsbG8yJywKICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgfQp9XTsKdmFyIGVkaXRvciA9IHsKICBzdGF0ZTogewogICAgY29tcG9uZW50czogdGVzdEVkaXRvckxpc3QsCiAgICBjdXJyZW50RWxlbWVudDogJycKICB9LAogIG11dGF0aW9uczogewogICAgYWRkQ29tcG9uZW50OiBmdW5jdGlvbiBhZGRDb21wb25lbnQoc3RhdGUsIGNvbXBvbmVudCkgewogICAgICBzdGF0ZS5jb21wb25lbnRzLnB1c2goY2xvbmVEZWVwKGNvbXBvbmVudCkpOwogICAgfSwKICAgIHNldEFjdGl2ZTogZnVuY3Rpb24gc2V0QWN0aXZlKHN0YXRlLCBjdXJyZW50SWQpIHsKICAgICAgc3RhdGUuY3VycmVudEVsZW1lbnQgPSBjdXJyZW50SWQ7CiAgICB9LAogICAgdXBkYXRlQ29tcG9uZW50OiBmdW5jdGlvbiB1cGRhdGVDb21wb25lbnQoc3RhdGUsIF9yZWYpIHsKICAgICAgdmFyIGtleSA9IF9yZWYua2V5LAogICAgICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlOwogICAgICB2YXIgbmV3U3RhdGUgPSBjbG9uZURlZXAoc3RhdGUpOwogICAgICB2YXIgaW5kZXggPSBuZXdTdGF0ZS5jb21wb25lbnRzLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBuZXdTdGF0ZS5jdXJyZW50RWxlbWVudDsKICAgICAgfSk7CiAgICAgIHZhciBjdXJyZW50ID0gbmV3U3RhdGUuY29tcG9uZW50c1tpbmRleF07CgogICAgICBpZiAoY3VycmVudCkgewogICAgICAgIGN1cnJlbnQucHJvcHNba2V5XSA9IHZhbHVlOwogICAgICB9CgogICAgICBzdGF0ZS5jb21wb25lbnRzW2luZGV4XSA9IGN1cnJlbnQ7CiAgICB9LAogICAgcmVtb3ZlQWN0aXZlOiBmdW5jdGlvbiByZW1vdmVBY3RpdmUoc3RhdGUpIHsKICAgICAgdmFyIGN1cnJlbnQgPSBzdGF0ZS5jb21wb25lbnRzLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBzdGF0ZS5jdXJyZW50RWxlbWVudDsKICAgICAgfSk7CgogICAgICBpZiAoY3VycmVudCkgewogICAgICAgIHN0YXRlLmNvbXBvbmVudHMuc3BsaWNlKGN1cnJlbnQsIDEpOwogICAgICB9CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRDdXJyZW50RWxlbWVudDogZnVuY3Rpb24gZ2V0Q3VycmVudEVsZW1lbnQoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmNvbXBvbmVudHMuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSBzdGF0ZS5jdXJyZW50RWxlbWVudDsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBlZGl0b3I7"},{"version":3,"mappings":";;;;AAAA,SAASA,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AAIA,SAASC,SAAT,QAA0B,QAA1B;AAeA,OAAO,IAAMC,cAAc,GAAoB,CAAC;AAC5CC,IAAE,EAAEH,MAAM,EADkC;AAE5CI,MAAI,EAAE,OAFsC;AAG5CC,OAAK,EAAE;AACHC,QAAI,EAAE,OADH;AAEHC,YAAQ,EAAE,MAFP;AAGHC,SAAK,EAAE,KAHJ;AAIHC,cAAU,EAAE,MAJT;AAKHC,cAAU,EAAE,KALT;AAMHC,OAAG,EAAE,kBANF;AAOHC,YAAQ,EAAE;AAPP;AAHqC,CAAD,EAY5C;AACCT,IAAE,EAAEH,MAAM,EADX;AAECI,MAAI,EAAE,OAFP;AAGCC,OAAK,EAAE;AACHC,QAAI,EAAE,QADH;AAEHM,YAAQ,EAAE;AAFP;AAHR,CAZ4C,CAAxC;AAqBP,IAAMC,MAAM,GAAyC;AACjDC,OAAK,EAAE;AACHC,cAAU,EAAEb,cADT;AAEHc,kBAAc,EAAE;AAFb,GAD0C;AAKjDC,WAAS,EAAE;AACPC,gBADO,wBACMJ,KADN,EACaK,SADb,EACqC;AACxCL,WAAK,CAACC,UAAN,CAAiBK,IAAjB,CAAsBnB,SAAS,CAACkB,SAAD,CAA/B;AACH,KAHM;AAIPE,aAJO,qBAIGP,KAJH,EAIUQ,SAJV,EAI2B;AAC9BR,WAAK,CAACE,cAAN,GAAuBM,SAAvB;AACH,KANM;AAOPC,mBAPO,2BAOST,KAPT,QAO8B;AAAA,UAAZU,GAAY,QAAZA,GAAY;AAAA,UAAPC,KAAO,QAAPA,KAAO;AACjC,UAAMC,QAAQ,GAAGzB,SAAS,CAACa,KAAD,CAA1B;AACA,UAAMa,KAAK,GAAGD,QAAQ,CAACX,UAAT,CAAoBa,SAApB,CAA8B,cAAI;AAAA,eAAIC,IAAI,CAAC1B,EAAL,KAAYuB,QAAQ,CAACV,cAAzB;AAAA,OAAlC,CAAd;AACA,UAAMc,OAAO,GAAGJ,QAAQ,CAACX,UAAT,CAAoBY,KAApB,CAAhB;;AACA,UAAIG,OAAJ,EAAa;AACTA,eAAO,CAACzB,KAAR,CAAcmB,GAAd,IAAqBC,KAArB;AACH;;AACDX,WAAK,CAACC,UAAN,CAAiBY,KAAjB,IAA0BG,OAA1B;AACH,KAfM;AAgBPC,gBAhBO,wBAgBMjB,KAhBN,EAgBW;AACd,UAAMgB,OAAO,GAAGhB,KAAK,CAACC,UAAN,CAAiBa,SAAjB,CAA2B,cAAI;AAAA,eAAIC,IAAI,CAAC1B,EAAL,KAAYW,KAAK,CAACE,cAAtB;AAAA,OAA/B,CAAhB;;AACA,UAAIc,OAAJ,EAAa;AACThB,aAAK,CAACC,UAAN,CAAiBiB,MAAjB,CAAwBF,OAAxB,EAAiC,CAAjC;AACH;AACJ;AArBM,GALsC;AA4BjDG,SAAO,EAAE;AACLC,qBADK,6BACapB,KADb,EACkB;AACnB,aAAOA,KAAK,CAACC,UAAN,CAAiBoB,IAAjB,CAAsB,cAAI;AAAA,eAAIN,IAAI,CAAC1B,EAAL,KAAYW,KAAK,CAACE,cAAtB;AAAA,OAA1B,CAAP;AACH;AAHI;AA5BwC,CAArD;AAmCA,eAAeH,MAAf","names":["v4","uuidv4","cloneDeep","testEditorList","id","name","props","text","fontSize","color","fontWeight","actionType","url","position","editor","state","components","currentElement","mutations","addComponent","component","push","setActive","currentId","updateComponent","key","value","newState","index","findIndex","item","current","removeActive","splice","getters","getCurrentElement","find"],"sourceRoot":"","sources":["/Users/jiajieliu/Codes/lego-component/node_modules/eslint-loader/index.js??ref--14-0!/Users/jiajieliu/Codes/lego-component/src/store/editor.ts"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\nimport { Module } from \"vuex\";\nimport { GlobalDataProps } from \"@/store/index\";\nimport { ImageDefaultProps, TextDefaultProps } from \"@/defaultProps\";\nimport { cloneDeep } from \"lodash\";\n\n\nexport interface ComponentData {\n    // props: { [key: string]: any } ; // 组件各种属性\n    props: Partial<TextDefaultProps & ImageDefaultProps> & { [key: string]: any };\n    id: string; // 组件id，uuid生成\n    name: any; // 组件对象\n}\n\nexport interface EditorProps {\n    components: ComponentData[];\n    currentElement: string; // 和id对应\n}\n\nexport const testEditorList: ComponentData[] = [{\n    id: uuidv4(),\n    name: 'lText',\n    props: {\n        text: 'ddsds',\n        fontSize: '20px',\n        color: 'red',\n        fontWeight: 'bold',\n        actionType: 'url',\n        url: 'http://baidu.com',\n        position: 'relative'\n    }\n}, {\n    id: uuidv4(),\n    name: 'lText',\n    props: {\n        text: 'hello2',\n        position: 'relative'\n    }\n}]\n\nconst editor: Module<EditorProps, GlobalDataProps> = {\n    state: {\n        components: testEditorList,\n        currentElement: '',\n    },\n    mutations: {\n        addComponent(state, component: ComponentData) {\n            state.components.push(cloneDeep(component))\n        },\n        setActive(state, currentId: string) {\n            state.currentElement = currentId\n        },\n        updateComponent(state, { key, value }) {\n            const newState = cloneDeep(state)\n            const index = newState.components.findIndex(item => item.id === newState.currentElement)\n            const current = newState.components[index]\n            if (current) {\n                current.props[key] = value\n            }\n            state.components[index] = current\n        },\n        removeActive(state) {\n            const current = state.components.findIndex(item => item.id === state.currentElement)\n            if (current) {\n                state.components.splice(current, 1)\n            }\n        }\n    },\n    getters: {\n        getCurrentElement(state) {\n            return state.components.find(item => item.id === state.currentElement)\n        }\n    }\n\n}\nexport default editor\n"]}]}